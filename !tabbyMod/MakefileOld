# Makefile for CModule

CCflags = -c -IRISC_OSLib: 
Linkflags = -aif -c++ -o $@


COMPONENT   = cmodule
OBJS        = CModule
CMHGDEPENDS = CModule
CUSTOMRES   = no

#include CModule

cmhg cmhg.CModuleHdr o.cmodulehdr h.cmodulehdr
cc -c -zM c.cmodule -c -IRISC_OSLib:
link -o cmodule -m o.cmodule o.cmodulehdr c:o.stubs

# This example has no 'h' directory, but one needs to be created to hold
# the header file generated by CMHG.
${DIRS} ::
	${MKDIR} h

# Clean should remove the 'h' directory created above.
clean ::
	${WIPE} h ${WFLAGS}

# Dynamic dependencies:
h.cmoduleHdr:	cmhg.cmoduleHdr
o.cmoduleHdr:	cmhg.cmoduleHdr
o.CModule:	c.CModule
o.CModule:	C:h.kernel
o.CModule:	h.cmodulehdr
o.CModule:	C:h.wimp
